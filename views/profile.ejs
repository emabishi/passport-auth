<!-- views/profile.ejs -->
<!doctype html>
<html>

<head>
  <title>Node Authentication</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
  <style>
    body {
      padding-top: 80px;
      word-wrap: break-word;
    }
  </style>
</head>

<body>
  <div class="container">

    <div class="page-header text-center">
      <h1><span class="fa fa-anchor"></span> Profile Page</h1>
      <a href="/logout" class="btn btn-default btn-sm">Logout</a>
    </div>

    <div class="row">

      <!-- LOCAL INFORMATION -->
      <div class="col-sm-6">
        <div class="well">
          <h3><span class="fa fa-user"></span> Local</h3>

          <%if (user.local && user.local.email) { %>

            <p>
              <strong>id</strong>: <%= user._id %><br>
              <strong>email</strong>: <%= user.local.email %><br>
              <strong>password</strong>: <%= user.local.password %>
            </p>

            <!-- Unlink only if not the only login strategy -->
            <% if (user.currentAuthenticationMethod !== 'local') { %>
              <a href="auth/local/unlink" class="btn btn-default">Unlink</a>
            <% } else { %>
              <!-- CAN'T UNLINK -->
              <a href="" class="btn btn-default disabled">Unlink</a>
            <% } %>

           <% } else { %>
            <a href="auth/local/connect" class="btn btn-default">Connect Local</a>
           <% } %>

        </div>
      </div>

    </div>
    <!-- FACEBOOK INFORMATION -->
    <div class="row">

      <div class="col-sm-6">
        <div class="well">
          <h3 class="text-primary"><span class="fa fa-facebook"></span> Facebook</h3>

          <!-- check if the user has this token (is the user authenticated with this social account) -->
          <% if (user.facebook.token) { %>

            <p>
              <!-- User object was passed to our profile page from our /profile routing middleware -->
              <strong>id</strong>: <%= user.facebook.id %><br>
              <strong>token</strong>: <%= user.facebook.token %><br>
              <strong>email</strong>: <%= user.facebook.email %><br>
              <strong>name</strong>: <%= user.facebook.name %>
            </p>

            <% if (user.currentAuthenticationMethod !== 'facebook') { %>
              <a href="auth/facebook/unlink" class="btn btn-primary">Unlink</a>
            <% } else { %>
              <a href="" class="btn btn-primary disabled">Unlink</a> 
              <% } %>
          <% } else { %>
            <a href="/auth/facebook/connect" class="btn btn-primary">Connect Facebook</a>
          <% } %>

        </div>
      </div>

    </div>

    <!-- GOOGLE INFORMATION -->
    <div class="row">

      <div class="col-sm-6">
        <div class="well">
          <h3 class="text-danger"><span class="fa fa-google"></span> Google</h3>

          <!-- check if the user has this token (is the user authenticated with this social account) -->
          <% if (user.google.token) { %>

            <p>
              <!-- User object was passed to our profile page from our /profile routing middleware -->
              <strong>id</strong>: <%= user.google.id %><br>
              <strong>token</strong>: <%= user.google.token %><br>
              <strong>email</strong>: <%= user.google.email %><br>
              <strong>name</strong>: <%= user.google.name %>
            </p>
            <% if (user.currentAuthenticationMethod !== 'google') { %>
              <a href="auth/google/unlink" class="btn btn-info">Unlink</a>
            <% } else { %>
              <!-- CAN'T UNLINK -->
              <a href="" class="btn btn-info disabled">Unlink</a>
            <% } %>
          <% } else { %>
            <a href="/auth/google/connect" class="btn btn-info">Connect Google</a>
          <% } %>

        </div>
      </div>

    </div>
    <!-- GITHUB INFORMATION -->
    <div class="row">

      <div class="col-sm-6">
        <div class="well">
          <h3 class="text-dark"><span class="fa fa-github"></span> Github</h3>

          <!-- check if the user has this token (is the user authenticated with this social account) -->
          <% if (user.github.token) { %>
            <p>
              <!-- User object was passed to our profile page from our /profile routing middleware -->
              <strong>id</strong>: <%= user.github.id %><br>
              <strong>token</strong>: <%= user.github.token %><br>
              <strong>email</strong>: <%= user.github.email %><br>
              <strong>name</strong>: <%= user.github.name %>
            </p>
            <% if (user.currentAuthenticationMethod !== 'github') { %>
              <a href="auth/github/unlink" class="btn btn-info">Unlink</a>
            <% } else { %>
              <!-- CAN'T UNLINK -->
              <a href="" class="btn btn-info disabled">Unlink</a>
            <% } %>
          <% } else { %>
            <a href="/auth/github/connect" class="btn btn-info">Connect Github</a>
          <% } %>

        </div>
      </div>

    </div>

  </div>
</body>

</html>